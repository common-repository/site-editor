window.sedApp=window.sedApp||{},function(a,b){var c,d,e=sedApp.editor,f=function(a,c){return{width:a-b(window).width()-b(window).scrollLeft(),height:c-b(window).height()-b(window).scrollTop()}},g=function(a){if(d[c.activeId].currentHover){var e=a?d[c.activeId].currentHover.nextAll(":not(."+d[c.activeId].separatorClass+"):visible:first"):d[c.activeId].currentHover.prevAll(":not(."+d[c.activeId].separatorClass+"):visible:first");0==e.length&&(e=d[c.activeId].currentHover.parent().find("> li:visible"),e=b(a?e[0]:e[e.length-1])),e.mouseover()}else{var f=b("#"+c.activeId+", #"+c.activeId+" ul").filter(function(){return b(this).is(":visible")&&0==b(this).parents(":hidden").length});if(f.length>0){var g=b(f[f.length-1]).find("> li:visible");b(g[a?0:g.length-1]).mouseover()}}},h=function(){for(cm in d)b(d[cm].allContext).removeClass(c.activeClass)},i=function(){c.activeId&&b("#"+c.activeId).add("#"+c.activeId+" ul").hide(),clearInterval(c.keyUpDown),c.keyUpDownStop=!1,d[c.activeId]&&(d[c.activeId].currentHover=null),c.activeId=null,b(document).unbind(".jeegoocontext"),b(window).unbind("resize.jeegoocontext")},j=function(a){return(!c.activeId||!d[c.activeId].onHide||0!=d[c.activeId].onHide.apply(b("#"+c.activeId),[a,d[c.activeId].context]))&&(h(),void i())};e.hideContextmenu=j,b.fn.jeegoocontext=function(a,e){c||(c={}),d||(d={}),e&&e.menuClass&&(c.menuClass=e.menuClass),c.menuClass||(c.menuClass="jeegoocontext"),e&&e.activeClass&&(c.activeClass=e.activeClass),c.activeClass||(c.activeClass="active"),d[a]=b.extend({hoverClass:"hover",submenuClass:"submenu",separatorClass:"separator",operaEvent:"ctrl+click",wrapper:"body",fadeIn:200,delay:300,keyDelay:100,widthOverflowOffset:0,heightOverflowOffset:0,submenuLeftOffset:0,submenuTopOffset:0,autoAddSubmenuArrows:!0,startLeftOffset:0,startTopOffset:0,keyboard:!0},e||{}),d[a].allContext=this.selector,b("#"+a).delegate("li","mouseover.jeegoocontext",function(c){var e=d[a].currentHover=b(this);clearTimeout(d[a].show),clearTimeout(d[a].hide),b("#"+a).find("*").removeClass(d[a].hoverClass);var g=e.parents("li");e.add(e.find("> *")).add(g).add(g.find("> *")).addClass(d[a].hoverClass);var h=!0;if(d[a].onHover&&0==d[a].onHover.apply(this,[c,d[a].context])&&(h=!1),!d[a].proceed)return d[a].show=setTimeout(function(){d[a].proceed=!0,e.mouseover()},d[a].delay),!1;if(d[a].proceed=!1,e.parent().find("ul").not(e.find("> ul")).hide(),!h)return c.preventDefault(),!1;var i=e.find("> ul");if(0!=i.length){var j=e.offset(),k=f(j.left+e.parent().width()+d[a].submenuLeftOffset+i.width()+d[a].widthOverflowOffset,j.top+d[a].submenuTopOffset+i.height()+d[a].heightOverflowOffset),l=i.parent().parent().width(),m=j.top-e.parent().offset().top;i.css({left:k.width>0&&!d[a].ignoreWidthOverflow?-l-d[a].submenuLeftOffset+"px":l+d[a].submenuLeftOffset+"px",top:k.height>0&&!d[a].ignoreHeightOverflow?m-k.height+d[a].submenuTopOffset+"px":m+d[a].submenuTopOffset+"px"}),i.fadeIn(d[a].fadeIn)}c.stopPropagation()}).delegate("li","click.jeegoocontext",function(e){return(!d[a].onSelect||0!=d[a].onSelect.apply(this,[e,d[a].context]))&&(i(),b(d[a].context).removeClass(c.activeClass),void e.stopPropagation())});var k=document.createElement("div");k.setAttribute("oncontextmenu","");var l=d[a].event;if(l?l+=".jeegoocontext":l="undefined"!=typeof k.oncontextmenu?"contextmenu.jeegoocontext":d[a].operaEvent+".jeegoocontext",l.indexOf("+")!=-1){var m=l.split("+",2);d[a].modifier=m[0]+"Key",l=m[1]}return b(d[a].wrapper).delegate(d[a].allContext,l,function(e){if("string"!=typeof d[a].modifier||e[d[a].modifier]){d[a].context=this;var k,l,m=b("#"+a);if(d[a].openBelowContext){var n=b(this).offset();k=n.left,l=n.top+b(this).outerHeight()}else k=e.pageX,l=e.pageY;k+=d[a].startLeftOffset,l+=d[a].startTopOffset;var o=f(k+m.width()+d[a].widthOverflowOffset,l+m.height()+d[a].heightOverflowOffset);return!d[a].ignoreWidthOverflow&&o.width>0&&(k-=o.width),!d[a].openBelowContext&&!d[a].ignoreHeightOverflow&&o.height>0&&(l-=o.height),(!d[a].onShow||0!=d[a].onShow.apply(m,[e,d[a].context,k,l]))&&(i(),c.activeId=a,b("#"+c.activeId).add("#"+c.activeId+" ul").hide(),h(),b(d[a].context).addClass(c.activeClass),m.find("li, li > *").removeClass(d[a].hoverClass),d[a].autoAddSubmenuArrows&&(m.find("li:has(ul)").not(":has(span."+d[a].submenuClass+")").prepend('<span class="'+d[a].submenuClass+'"></span>'),m.find("li").not(":has(ul)").find("> span."+d[a].submenuClass).remove()),m.css({left:k+"px",top:l+"px"}).fadeIn(d[a].fadeIn),d[a].openBelowContext&&b(window).bind("resize.jeegoocontext",function(){b("#"+a).css("left",b(d[a].context).offset().left+d[a].startLeftOffset+"px")}),b(document).bind("mouseover.jeegoocontext",function(e){if(b(e.relatedTarget).parents("#"+a).length>0){clearTimeout(d[a].show);var f=b(e.relatedTarget).parent().find("li");f.add(f.find("> *")).removeClass(d[a].hoverClass),d[c.activeId].currentHover=null,d[a].hide=setTimeout(function(){f.find("ul").hide(),d[a].autoHide&&j(e)},d[a].delay)}}).bind("click.jeegoocontext",j),d[a].keyboard&&b(document).bind("keydown.jeegoocontext",function(a){switch(a.which){case 38:return!c.keyUpDownStop&&(g(),c.keyUpDown=setInterval(g,d[c.activeId].keyDelay),c.keyUpDownStop=!0,!1);case 39:if(d[c.activeId].currentHover)d[c.activeId].currentHover.find("ul:visible:first li:visible:first").mouseover();else{var e=b("#"+c.activeId+", #"+c.activeId+" ul:visible");e.length>0&&b(e[e.length-1]).find(":visible:first").mouseover()}return!1;case 40:return!c.keyUpDownStop&&(g(!0),c.keyUpDown=setInterval(function(){g(!0)},d[c.activeId].keyDelay),c.keyUpDownStop=!0,!1);case 37:if(d[c.activeId].currentHover)b(d[c.activeId].currentHover.parents("li")[0]).mouseover();else{var f=b("#"+c.activeId+" li."+d[c.activeId].hoverClass);f.length>0&&b(f[f.length-1]).mouseover()}return!1;case 13:d[c.activeId].currentHover?d[c.activeId].currentHover.click():j(a);break;case 27:j(a)}}).bind("keyup.jeegoocontext",function(a){clearInterval(c.keyUpDown),c.keyUpDownStop=!1}),!1)}})}}(sedApp,jQuery);