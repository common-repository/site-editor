!function(a,b){function c(a,c){this.element=a,this.options=b.extend({pagination_type:"infinite_scroll",container:window,current_url:"",btn_more:"",offset:20,max_pages:1,success:function(){}},c),this.paged=1,this.flag=!0,this._loadMore=!0,this.init()}sedApp.editor;c.prototype={init:function(){switch(this.options.pagination_type){case"button":this.init_button();break;default:this.init_scroll()}},options_is_set:function(a){return"undefined"!=typeof this.options[a]&&""!=this.options[a]},init_button:function(){var a=this;b(this.options.btn_more).bind("click",function(b){b.preventDefault(),a.load_more()})},init_scroll:function(){var a=this,c=function(a,b,c){var d;return function(){var e=arguments;c=c||this,clearTimeout(d),d=setTimeout(function(){d=null,a.apply(c,e)},b)}},d=c(function(){b(a.options.container).scrollTop()+b(a.options.container).height()>b(a.element).height()-a.options.offset&&a.load_more()},10);b(a.options.container).bind("scroll",function(){d()})},load_more:function(){return this._loadMore===!0&&void this.load_posts()},load_posts:function(a){var c,d=this;if(c="button"==this.options.pagination_type?b(this.options.btn_more):b(this.options.btn_more).next(),a={ajax_archive:!0},this.flag){if(this.paged++,a.paged=this.paged,this.paged>this.options.max_pages)return void(this._loadMore=!1);b.ajax({type:"GET",url:this.current_url,data:a,beforeSend:function(){d.flag=!1,c.addClass("loading")},success:function(a){c.removeClass("loading"),d.flag=!0,elements=b(b(a).find("#ajax-update-posts").html()).appendTo(b(d.element)),"function"==typeof d.options.success&&d.options.success(elements),d.options.max_pages==d.paged&&"button"==d.options.pagination_type&&b(d.options.btn_more).addClass("hide")},error:function(a,b,d){c.removeClass("loading")}})}},destroy:function(){switch(this.options.pagination_type){case"button":b(this.options.btn_more).unbind("click");break;default:b(this.options.container).unbind("scroll")}b(this.element).off(".sedAjaxLoadPosts").removeData("sedAjaxLoadPosts")}},b.fn.sedAjaxLoadPosts=function(a){return this.each(function(){var d=b(this),d=b(this),e=d.data("sedAjaxLoadPosts"),f="object"==typeof a&&a;e||d.data("sedAjaxLoadPosts",e=new c(this,f))})}}(sedApp,jQuery);